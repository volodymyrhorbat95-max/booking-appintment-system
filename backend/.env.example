# Backend Environment Variables
# Copy this file to .env and fill in your values

# Server Configuration
PORT=5000
NODE_ENV=development

# Frontend URL (for CORS and redirects)
FRONTEND_URL=http://localhost:5173
BACKEND_URL=http://localhost:5000
# Database Configuration (PostgreSQL)
# Development URL (default pooling)
DATABASE_URL="postgresql://username:password@localhost:5432/appointment_platform?schema=public"

# Production URL (optimized connection pooling for high concurrency)
# Uncomment and modify for production:
# DATABASE_URL="postgresql://username:password@host:5432/appointment_platform?schema=public&connection_limit=20&pool_timeout=30&connect_timeout=10"
#
# Connection pool parameters (Section 12.2 - Concurrent Users):
# - connection_limit: Max connections (default: 3/CPU, recommended prod: 20-50)
# - pool_timeout: Time to wait for connection from pool (default: 10s, recommended: 30s)
# - connect_timeout: Time to establish connection (default: 5s, recommended: 10s)

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d

# Encryption Configuration (REQUIRED for sensitive data protection)
# Used to encrypt Google OAuth refresh tokens and patient PII (email, phone)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# MUST be exactly 64 hexadecimal characters (32 bytes)
ENCRYPTION_KEY=your-64-character-hex-encryption-key-here

# Google OAuth Configuration (for Google Calendar)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALENDAR_REDIRECT_URI=http://localhost:5000/api/professional/google-calendar/callback

# Twilio WhatsApp Configuration
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_WHATSAPP_NUMBER=+14155238886

# Mercado Pago Configuration (Argentina)
MERCADOPAGO_ACCESS_TOKEN=your-mercadopago-access-token
MERCADOPAGO_PUBLIC_KEY=your-mercadopago-public-key
# Webhook secret for signature validation (required in production)
MERCADOPAGO_WEBHOOK_SECRET=your-mercadopago-webhook-secret

# Email Configuration (Resend - for email confirmations)
RESEND_API_KEY=your-resend-api-key
EMAIL_FROM=Citas <noreply@yourdomain.com>

# Platform Settings
DEFAULT_TIMEZONE=America/Argentina/Buenos_Aires
DEFAULT_COUNTRY_CODE=+54

# Admin User Configuration (for seeding)
ADMIN_EMAIL=admin@appointmentplatform.com
ADMIN_PASSWORD=Admin123!

# Deposit Settings
# Time limit (in minutes) for patients to pay deposit before slot is released
DEPOSIT_TIME_LIMIT_MINUTES=30

# Error Tracking (Sentry)
# Optional in development, highly recommended in production for error monitoring
# Agendux project: https://sentry.io/organizations/agendux/projects/agendux/
SENTRY_DSN=https://aa7c31de1e31731be2e0851933c54891@o4510694836535296.ingest.us.sentry.io/4510694851477504
SENTRY_ENABLE_IN_DEV=false
